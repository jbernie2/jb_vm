/**
 * jb_vm 0.0.1 built on 2016-01-08.
 * Copyright (c) 2015 John Bernier <john.b.bernier@gmail.com>
 *
 * https://github.com/jbernie2/vm_js
 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jb_vm=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.OPCODE_LOOKUP=c.REGISTER_LOOKUP=void 0;var e=a("./registers"),f=d(e),g=a("./opcodes"),h=d(g),i=function(a){var b={};return a.forEach(function(a){b[a[0]]=a[1],b[a[1]]=a[0]}),b};c.REGISTER_LOOKUP=i(f["default"]),c.OPCODE_LOOKUP=i(h["default"])},{"./opcodes":3,"./registers":4}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./constants_lookup_tables"),f=(d(e),24),g=20,h=16,i=12,j=0,k=["halt","add","loadl"],l={halt:0,add:1,loadl:2},m={reg0:0,reg1:1,reg2:2,reg3:3,reg4:4,reg5:5,reg6:6,reg7:7,reg8:8,reg9:9,rega:10,regb:11,vm:12,ih:13,sp:14,pc:15},n=!0,o={reg0:0,reg1:1,reg2:2,reg3:3,reg4:4,reg5:5,reg6:6,reg7:7,reg8:8,reg9:9,rega:10,regb:11,vm:12,ih:13,sp:14,pc:0},p=function(a){n=!1,console.log("halting")},q=function(a){console.log("add")},r=function(a){console.log("loadl")},s={halt:p,loadl:r,add:q},t=function(){var a=z[o.pc];return o.pc+=1,a},u=function(a){return{opcode:(4278190080&a)>>>f,dest_reg:(15728640&a)>>>g,src_reg_1:(983040&a)>>>h,src_reg_2:(61440&a)>>>i,constant:(65535&a)>>>j}},v=function(a){var b=k[a.opcode],c=s[b];c(a)},w=function(){for(;n;)v(u(t()))},x=function(a){var b,c,d=a[0],e=a[1],k=a[2],n=a[3],o=a[4];if(d){var p=l[d];b=y(b,p,f)}return e&&(c=m[e],b=y(b,c,g)),k&&(c=m[k],b=y(b,c,h)),n&&(c=m[n],b=y(b,c,i)),o&&(b=y(b,o,j)),b},y=function(a,b,c){return a|b<<c},z=[["loadl","reg1",null,null,1],["loadl","reg2",null,null,2],["add","reg3","reg1","reg2",null],["halt",null,null,null,null]].map(x);w(),console.log("packing loadl reg1 5: "+x(["loadl","reg1",null,null,5]).toString(16))},{"./constants_lookup_tables":1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.OPCODES=[["halt",0],["addi",1],["loadl",2]]},{}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.REGISTERS=[["reg0",0],["reg1",1],["reg2",2],["reg3",3],["reg4",4],["reg5",5],["reg6",6],["reg7",7],["reg8",8],["reg9",9],["rega",10],["regb",11],["vm",12],["ih",13],["sp",14],["pc",15]]},{}]},{},[1,2,3,4])(4)});